# Tappy Trade - UPDATED Test Checklist (Current Features Only)
Last Updated: 2026-01-07 18:05

‚úÖ = VERIFIED FEATURE EXISTS IN CODE
‚ùå = REMOVED/DELETED FEATURE (won't test)

---

## CORE GAME MECHANICS
- [ ] ‚úÖ ManualHarvesting (tap resources) - PASS
- [ ] ‚úÖ Resource Regeneration (nodes refill over time) - PASS
- [ ] ‚úÖ Money System (earning/spending) - PASS
- [ ] ‚úÖ Inventory System (storing items) - PASS
- [ ] ‚úÖ Inventory Capacity Limits

## WORKER AUTOMATION
- [ ] ‚úÖ Hire Workers ($500 + incremental cost) - PASS
- [ ] ‚ö†Ô∏è Fire Workers (with confirmation) - WORKS but no confirmation (FIXING)
- [ ] ‚ö†Ô∏è Auto-Harvesting (workers collect every 5 seconds) - WORKS but floating text position bug
- [ ] ‚úÖ Multiple Workers Running Simultaneously - PASS
- [ ] ‚úÖ Worker Cost Scaling - PASS

## PLOT SYSTEM
- [ ] ‚úÖ Buy New Plots (unlock expansion) - PASS
- [ ] ‚úÖ Resource Nodes on Plots - PASS
- [ ] ‚úÖ Wild/Farm/Mine Resource Types (4 subplots per plot) - PASS

## BUILDING SYSTEM
- [ ] ‚úÖ Open Build Modal (long-press/hold) - PASS (remItem bug fixed)
- [ ] ‚úÖ Place Buildings on Plots - PASS (remItem bug fixed)
- [ ] ‚úÖ Building Production - PASS
- [ ] ‚úÖ Upgrade Buildings (up to Lv5)
- [ ] ‚úÖ Building Cost Display - PASS
- [ ] ‚úÖ Demolish Buildings (50% refund)
- [ ] ‚úÖ Storage Buildings (increase capacity)

## MARKET SYSTEMS

### Government Market (Sell Only)
- [ ] ‚úÖ Sell Items to Government (at base price) - PASS
- [ ] ‚úÖ Sell All Functionality - PASS

### Player Market (P2P Firebase)
- [ ] ‚úÖ Post Sell Orders - PASS (tested with playerMarket.js module)
- [ ] ‚úÖ Post Buy Orders - PASS
- [ ] ‚úÖ Fill Other Players' Orders - PASS
- [ ] ‚úÖ Cancel Own Orders - PASS
- [ ] ‚úÖ View Active Market Orders - PASS
- [ ] ‚úÖ Market Connection Status - PASS (Firebase connected)

### Limit Orders (Local Auto-Trade)
- [ ] ‚úÖ Create Limit Orders (UI exists in index.html)
- [ ] ‚úÖ Limit Order Execution (processes every 10 seconds in game loop)
- [ ] ‚úÖ Cancel Limit Orders
- [ ] ‚úÖ Limit Order Display

## SAVE/LOAD SYSTEM
- [ ] ‚úÖ Auto-Save (every 30 seconds) - PASS
- [ ] ‚úÖ Manual Save (window.save())
- [ ] ‚úÖ Load on Refresh (localStorage key: 'tt4') - PASS
- [ ] ‚úÖ Cloud Save (when logged in via Firebase) - PASS (auto-saves to cloud)
- [ ] ‚úÖ Cloud Load (when logged in) - PASS (with offline progress calculation!)
- [ ] ‚úÖ Offline Progress Calculation (calculates up to 12 hours catch-up) - PASS
- [ ] ‚úÖ Save Migration (version 1‚Üí2 for cap fix)

### **OFFLINE PROGRESS TEST** ‚úÖ (NOW IMPLEMENTED - SHOULD PASS)
- [ ] **Step 1:** Hire at least 1 worker
- [ ] **Step 2:** Note current money, inventory count, and time
- [ ] **Step 3:** Close browser completely (not just tab)
- [ ] **Step 4:** Wait 60-120 seconds
- [ ] **Step 5:** Reopen game in fresh browser
- [ ] **Step 6:** Verify workers harvested during offline time
- [ ] **Step 7:** Verify resources regenerated during offline time
- [ ] **Step 8:** Calculate expected harvests (time / 5 seconds per worker)
- [ ] **Step 9:** Verify actual matches expected (¬±2 tolerance)
**Expected Result:** Should now show notification with caught-up harvests!
**Max Offline:** 12 hours (43,200 seconds)

## ACCOUNT SYSTEM
- [ ] ‚úÖ Guest Mode (play without account) - PASS
- [ ] ‚úÖ Register Account (Firebase) - PASS (creates cloud save)
- [ ] ‚úÖ Login to Account - PASS (loads cloud save!)
- [ ] ‚úÖ Logout
- [ ] ‚úÖ Account UI Display - PASS
- [ ] ‚úÖ Cloud Sync Status - PASS

## MULTIPLAYER FEATURES

### Chat (Firebase)
- [ ] ‚úÖ Open Chat - PASS
- [ ] ‚úÖ Send Messages - PASS
- [ ] ‚úÖ Receive Messages (real-time) - Can't test alone
- [ ] ‚úÖ Chat History - PASS
- [ ] ‚úÖ Close Chat - PASS
- [ ] ‚úÖ Connection Status - PASS

### Leaderboard (Firebase)
- [ ] ‚ö†Ô∏è View Top 20 Players - Works but doesn't auto-update
- [ ] ‚úÖ Player Rankings by Money
- [ ] ‚úÖ Open Leaderboard - PASS
- [ ] ‚úÖ Close Leaderboard
- [ ] ‚úÖ Not Connected State (guest)

## UI/NAVIGATION
- [ ] ‚úÖ Home Screen - PASS
- [ ] ‚úÖ Inventory Screen - PASS
- [ ] ‚úÖ Workers Screen - PASS
- [ ] ‚úÖ Market Screen (Player Market) - PASS
- [ ] ‚úÖ Chat Screen - PASS
- [ ] ‚úÖ Navigation Active States (visual indicator of current tab)
- [ ] ‚úÖ Screen Switching - PASS
- [ ] ‚úÖ Stats Display (top bar) - PASS
- [ ] ‚úÖ Money Display - PASS
- [ ] ‚úÖ Inventory Count Display - PASS

## MENU SYSTEM
- [ ] ‚úÖ Open Menu - PASS
- [ ] ‚úÖ Close Menu - PASS
- [ ] ‚úÖ Statistics Screen - PASS
- [ ] ‚ö†Ô∏è Daily Rewards - Works but button doesn't update until close/reopen
- [ ] ‚ö†Ô∏è Help Screen - Placeholder "more content coming soon"
- [ ] ‚úÖ Account Modal
- [ ] ‚úÖ Leaderboard Access - PASS (but doesn't auto-refresh)
- [ ] ‚úÖ Settings

## SETTINGS
- [ ] ‚úÖ Toggle Theme (Dark/Light) - PASS
- [ ] ‚úÖ Font Size Adjustment (Small/Medium/Large)
- [ ] ‚úÖ Sound Toggle - PASS
- [ ] ‚úÖ Settings Persistence

## ACHIEVEMENTS & REWARDS
- [ ] ‚úÖ Achievement Tracking (checkAchievements runs every 15s)
- [ ] ‚úÖ Achievement Unlocking (automatic based on stats)
- [ ] ‚úÖ Achievement UI Display (shows in stats screen with progress)
- [ ] ‚úÖ Achievement Progress Tracking (calculates % to goal)
- [ ] ‚úÖ Daily Rewards System
- [ ] ‚úÖ Daily Streak Counter
- [ ] ‚úÖ Claim Daily Reward
- [ ] ‚úÖ Daily Reward Cooldown

## VISUAL/UX
- [ ] ‚úÖ Tooltips (resource hover - showTip function)
- [ ] ‚úÖ Toast Notifications (success/error)
- [ ] ‚úÖ Banner Notifications (notif function)
- [ ] ‚úÖ Floating Text (money earned animations)
- [ ] ‚úÖ Progress Bars (on resources)
- [ ] ‚úÖ Resource Icons Display
- [ ] ‚úÖ Sound Effects (playS function)
- [ ] ‚úÖ Background Music
- [ ] ‚úÖ Day/Night Cycle (changes background every minute based on time)

## GAME LOOP
- [ ] ‚úÖ Update Loop Running (startGameLoop called in init)
- [ ] ‚úÖ Worker Timer (uses while loop for catch-up)
- [ ] ‚úÖ Resource Regeneration Loop (updatePlots called every frame)
- [ ] ‚úÖ Auto-Save Timer (works via modular game loop)
- [ ] ‚úÖ Limit Order Processing (calls processLimitOrders every 10s)
- [ ] ‚úÖ Timestamp Tracking (S.lastUpdate for offline calculation)

## DATA PERSISTENCE
- [ ] ‚úÖ Farm Name
- [ ] ‚úÖ Farm Renaming ($1000 cost after first)
- [ ] ‚úÖ Tutorial Status
- [ ] ‚úÖ Achievement Progress (tracks progress toward unlocks)
- [ ] ‚úÖ Statistics (harvested, earned, sold, built)
- [ ] ‚úÖ Game Version Tracking

## MOBILE/PWA
- [ ] ‚úÖ Touch Controls
- [ ] ‚úÖ Long-Press Detection
- [ ] ‚úÖ PWA Installation (manifest.json)
- [ ] ‚ö†Ô∏è Service Worker Caching (FIX: cache.addAll error)
- [ ] ‚ö†Ô∏è Offline Functionality (FIX: after offline progress implemented)
- [ ] ‚úÖ Responsive Layout

## RECENT FIXES & ENHANCEMENTS (2026-01-08)

### Priority 1: UX Polish
- [ ] ‚úÖ Worker Floating Text - Only shows on Home screen (cross-screen bug fixed)
- [ ] ‚úÖ Daily Rewards Button - Auto-updates immediately after claim
- [ ] ‚úÖ Leaderboard Auto-Refresh - Refreshes every 30 seconds when open
- [ ] ‚úÖ Leaderboard Interval Cleanup - Clears on close (no memory leak)

### Priority 2: Core Features
- [ ] ‚úÖ Building Upgrade to Lv5 - All 5 levels work, shows MAX LEVEL at Lv5
- [ ] ‚úÖ Upgrade Cost Scaling - 75% of base cost √ó level multiplier
- [ ] ‚úÖ Level Bonuses - +10% regen, +10 storage per level
- [ ] ‚úÖ Demolish Resets to Wild - Properly returns to 'wild' type (was 'forest')
- [ ] ‚úÖ Demolish Refunds Storage - Reduces S.cap if building had storage bonus

### Priority 3: Visual/UX
- [ ] ‚úÖ Modal Fade-In Animation - Smooth 0.2s scale + opacity transition
- [ ] ‚úÖ Button Press Feedback - Scales to 95% when clicked
- [ ] ‚úÖ Circular Progress Rings - Visual fill indicator on subplots
- [ ] ‚úÖ Sound System - Web Audio API (tap, sell, error, achievement)
- [ ] ‚úÖ Background Music - Auto-plays on first interaction

### System Updates
- [ ] ‚úÖ Event Delegation - All UI uses data-action attributes
- [ ] ‚úÖ Game Reset Anti-Race - Prevents beforeunload from saving over reset
- [ ] ‚úÖ Double-Harvest Fix - Removed duplicate event listener

### Edge Cases to Test
- [ ] Build on all 3 subplots of a single plot
- [ ] Hire 10 workers (max limit)
- [ ] Fill inventory to exactly capacity (1000/1000)
- [ ] Demolish a Lv5 building (should refund correctly)
- [ ] Switch screens rapidly (no rendering bugs)
- [ ] Open/close modals rapidly (no animation glitches)
- [ ] Upgrade building while worker is assigned to it
- [ ] Save and reload with workers running
- [ ] Multiple plots with different building levels

## ERROR HANDLING
- [ ] Check Console Errors - VERIFIED: Only expected warnings (password, meta tag, service worker)
- [ ] Graceful Connection Failures
- [ ] Save/Load Error Recovery
- [ ] Invalid Input Handling

---

## TESTING STATUS (2026-01-07 19:25):
**‚úÖ VERIFIED WORKING:**
- Game loads successfully
- All 37 modules load correctly
- Game loop and systems functioning
- Firebase connects successfully
- **Cloud save/load with offline progress working!**
- **52 features tested and passing** (46 + 6 cloud/account)

**üîß FIXED DURING TESTING:**
- updatePlots export missing from plots.js (FIXED)
- showConfetti import error in achievements.js (FIXED)  
- Browser caching issues (resolved with Ctrl+F5)
- remItem inventory string corruption bug (FIXED)
- **Cloud save/load implementation (FIXED)** - now properly saves/loads with offline progress

**‚ö†Ô∏è MINOR ISSUES FOUND:**
- Floating text appears in wrong location (cross-screen bug)
- Daily Rewards button doesn't update until modal close/reopen
- Leaderboard doesn't auto-refresh (manual refresh works)
- Help Screen is placeholder only
- Navigation Active States (tab highlighting) - not verified

**üìã REMAINING TESTS:**
- Player Market (post/fill/cancel orders)
- Limit Orders (create/execute/cancel)
- Manual save verification
- **Offline Progress Test** (60-120s test recommended)
- Logout functionality
- Achievements (unlocking verification)
- Upgrades & Demolishing
- Visual/UX features
- Data persistence

---

## FINAL COUNT:
- Total Features: ~70
- Verified Working: ~50
- Known Broken: ~10
- Removed/Never Implemented: ~10
