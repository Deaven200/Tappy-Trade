================================================================================
                    TAPPY TRADE - GAME DESIGN DOCUMENT
================================================================================

Last Updated: 2026-01-09
Platform: Web Browser (Mobile + Desktop)
Genre: Multiplayer Idle Trading/Economy Game
Engine: Vanilla JavaScript (Modular ES6)
Live URL: https://deaven200.github.io/Tappy-Trade-github/

================================================================================
                               CORE CONCEPT
================================================================================

A browser-based multiplayer trading game where players harvest resources,
build production chains, hire workers, and trade in real-time markets.

Key Features:
- Tap-to-harvest wild resources
- 40+ building types with production chains
- Dual market system (Player + Government)
- Real-time multiplayer (500-1000 concurrent players)
- Discord integration for community chat
- Cloud saves with offline progression
- Worker automation system
- Resource processing and manufacturing

================================================================================
                             CORE GAME LOOP
================================================================================

1. Start with 1 free plot containing 3 wild subplots
2. Tap subplots to harvest wood, berries, herbs
3. Resources accumulate in inventory (expandable capacity)
4. Sell to Government Market for guaranteed money
5. Trade with real players in Player Market for better deals
6. Buy more plots (exponentially expensive: $5k, $15k, $35k...)
7. Build structures (farms, sawmills, factories)
8. Hire workers for automated harvesting
9. Create production chains (wood â†’ planks â†’ furniture)
10. Expand empire across multiple plots
11. Dominate markets through strategic trading

================================================================================
                           LAND PLOT SYSTEM
================================================================================

Plot Structure:
- Each PLOT contains 3 SUB-PLOTS
- Maximum plots: ~10+ (exponential cost scaling)
- Players can switch between owned plots

Plot Costs (Exponential):
- Plot #1: FREE (starter plot)
- Plot #2: $5,000
- Plot #3: $15,000
- Plot #4: $35,000
- Plot #5: $75,000
- Continues scaling 2-3x per plot

Sub-Plot Types:
1. WILD LAND
   - Natural resource generation (forests, berry bushes)
   - Tap to harvest manually
   - Resources regenerate over time
   - Can be upgraded (Lv 1-5) for faster regen
   
2. BUILDINGS
   - Replace wild subplots
   - Auto-process inventory materials
   - Require construction resources (wood, stone, money)
   - Can be upgraded (Lv 1-5) for better efficiency
   - Can be demolished (50% resource refund)

Sub-Plot Interactions:
- TAP: Harvest resources / View building status
- TAP & HOLD: Open build/upgrade menu
- Workers can be assigned to auto-harvest

================================================================================
                         RESOURCE SYSTEM (40+)
================================================================================

Tier 1: Raw Resources (Wild Harvest)
ğŸŒ² Wood       - From forests, base material
ğŸª¨ Stone      - From rocky areas
ğŸ« Berries    - From wild bushes, food resource
ğŸŒ¿ Herbs      - From herb patches
ğŸŒ¾ Wheat      - From wild grass/early farms
ğŸ¥• Carrots    - Farm vegetable
ğŸ¥” Potatoes   - Farm vegetable
ğŸ„ Mushrooms  - Forest resource
ğŸŒ¸ Flowers    - Decorative/crafting
ğŸªµ Logs       - Large trees

Tier 2: Processed Goods (Buildings Required)
ğŸ“ Planks     - Sawmill: 5 wood â†’ 1 plank
ğŸ§± Bricks     - Kiln: 3 stone â†’ 1 brick
ğŸ Bread      - Bakery: 2 wheat â†’ 1 bread
ğŸ¥› Milk       - Dairy: From cows
ğŸ¥š Eggs       - Coop: From chickens
ğŸ§µ Thread     - Mill: From cotton/wool
ğŸª™ Iron Ore   - Mine output
ğŸ§² Iron Bar   - Forge: 2 ore â†’ 1 bar
ğŸªµ Beam       - Advanced lumber
ğŸ§´ Glass      - Furnace: From sand

Tier 3: Manufactured Goods (Multi-Step)
ğŸª‘ Furniture  - Workshop: planks + iron
âš™ï¸ Tools      - Forge: iron + wood
ğŸº Pottery    - Kiln: clay crafting
ğŸ¨ Paint      - Factory: flowers + chemicals
ğŸ§º Baskets    - Weaver: thread crafting
ğŸ”§ Nails      - Forge: iron processing
ğŸªµ Barrel     - Cooper: planks assembly
ğŸ—ï¸ Keys       - Blacksmith: iron crafting
ğŸ“œ Paper      - Mill: wood pulp processing
ğŸ¯ Honey      - Apiary: from bees

Specialty Resources:
ğŸ Bees       - Apiary production
ğŸ„ Cows       - Livestock for milk
ğŸ” Chickens   - Livestock for eggs
ğŸ‘ Sheep      - Livestock for wool
ğŸŒ± Seeds      - Farming input
ğŸ’ Gems       - Rare mining output

Resource Properties:
- Stack Size: 100 (most items)
- Regeneration: 5-15 minutes for wild resources
- Processing Time: 30 seconds - 5 minutes depending on complexity
- Quality: All standard (no rarity system currently)

================================================================================
                         INVENTORY SYSTEM
================================================================================

Capacity:
- Base: 100 slots per plot owned
- 1 plot = 100 slots
- 5 plots = 500 slots
- Storage buildings add capacity (warehouses, barns)
- Each storage building: +50-100 slots

Organization:
- List view (default): Scrollable item list
- Grid view (toggle): Icon-based display
- Sort options: Name, Quantity, Type, Value
- Filter by: Resource tier, building type
- Quick actions: Sell, Use, Info

Stack Rules:
- Most items: 100 per stack
- Food items: 50 per stack
- Unique items: 1 per stack
- Auto-stacking on collection

================================================================================
                           BUILDING SYSTEM
================================================================================

Building Categories:

ğŸŒ¿ GATHERING (Wild Resource Enhancers)
- Forest (All levels) - Better wood production
- Berry Grove - Enhanced berry yield
- Herb Garden - Cultivated herbs
- Rock Quarry - Stone extraction

ğŸŒ¾ FARMS (Food Production)
- Wheat Field - Wheat farming
- Vegetable Patch - Carrots, potatoes
- Fruit Orchard - Apples, berries
- Mushroom Farm - Controlled mushroom growth

ğŸ„ LIVESTOCK (Animal Products)
- Chicken Coop - Eggs, feathers
- Dairy Barn - Milk from cows
- Sheep Pen - Wool production
- Beehive/Apiary - Honey production

ğŸ­ MANUFACTURING (Processing)
- Sawmill - Wood â†’ Planks (5:1 ratio, 2min)
- Kiln - Stone â†’ Bricks (3:1 ratio, 3min)
- Forge - Iron Ore â†’ Iron Bars (2:1, 4min)
- Bakery - Wheat â†’ Bread (2:1, 2min)
- Weaver - Thread â†’ Cloth (3:1, 5min)

ğŸ SPECIALTY (Advanced)
- Workshop - Furniture crafting (complex recipes)
- Brewery - Beverage production
- Pottery - Clay crafting
- Florist - Flower arrangements

ğŸ“¦ UTILITY (Infrastructure)
- Warehouse - +100 inventory capacity
- Worker Lodge - +1 worker slot
- Market Stall - Access to trading from home
- Storage Shed - +50 capacity (cheap)

Building Costs (Example):
- Sawmill: 50 wood + 20 stone + $500
- Wheat Field: 25 wood + $300
- Dairy Barn: 100 planks + 50 stone + $2,000
- Workshop: 200 planks + 100 iron + $5,000

Upgrade System:
- All buildings: Level 1-5
- Each level: +10% efficiency, +10 storage
- Upgrade costs: 75% of base cost Ã— level
- Benefits compound (Lv5 = 40% faster than Lv1)

Building Actions:
- Upgrade: Improve efficiency and capacity
- Pause: Stop production temporarily
- Demolish: Remove building (50% resource refund)
- Assign Worker: Automate production

Production Display:
"ğŸ­ Sawmill (Lv 3)
Status: RUNNING
Input: Wood (150 available)
Output: Planks
Rate: 5 wood â†’ 1 plank (90 seconds)
Efficiency: 130% (from level)
Produced: 45 planks today"

================================================================================
                           WORKER SYSTEM
================================================================================

Worker Types:
1. Harvester - Collects from wild subplots
2. Farmhand - Tends to farm buildings
3. Processor - Operates manufacturing
4. General - Works any subplot (80% efficiency)

Worker Mechanics:
- Max workers: 10 (expandable with lodges)
- Hire cost: $500 + ($200 Ã— current worker count)
- No ongoing wages (one-time purchase)
- Efficiency: 100% of manual tapping
- Interval: Harvests every 5 seconds
- Assignment: Permanent until fired or reassigned

Worker Assignment:
"ğŸ‘· Worker #1
Assigned: Plot 1, Subplot 2 (Forest)
Produces: ~720 wood/hour
Status: ACTIVE
[FIRE] [REASSIGN]"

Worker Benefits:
- Passive income while offline
- Scales with building levels
- No diminishing returns
- Can be reassigned anytime
- Fire for 0 refund (manage carefully)

Offline Progression:
- Workers continue producing (max 8 hours stored)
- Login message: "Your 3 workers collected 5,760 wood!"
- Resources auto-added to inventory (if space)
- If inventory full: Lost resources noted

================================================================================
                           MARKET SYSTEMS
================================================================================

--- GOVERNMENT MARKET (NPC) ---

Features:
- Always available (unlimited supply/demand)
- Fixed base prices per resource
- Prices fluctuate Â±20% based on global player activity
- Updates every 15 minutes
- No transaction fees
- Instant buy/sell

Price Formula:
Display Price = Base Price Ã— (Global Demand / Global Supply)

Example Prices:
Resource  | Base | Current Buy | Current Sell
----------|------|-------------|-------------
Wood      | $5   | $8          | $4  ğŸ“‰ (oversupply)
Planks    | $20  | $32         | $18 ğŸ“ˆ (high demand)
Bread     | $12  | $15         | $10 â¡ï¸  (stable)
Tools     | $50  | $65         | $45 ğŸ“ˆ (scarce)

UI Display:
"ğŸ›ï¸ GOVERNMENT MARKET
Wood:    Buy $8  | Sell $4  ğŸ“‰ | You have: 150
Planks:  Buy $32 | Sell $18 ğŸ“ˆ | You have: 25

[SELL ALL WOOD] - Earn $600
Price updates in: 8:23"

--- PLAYER MARKET (P2P Trading) ---

Features:
- Order book system (like stock exchange)
- Players post BUY orders or SELL orders
- Orders active for 48 hours (auto-cancel after)
- 5% transaction fee (prevents spam)
- Real-time order matching
- Firebase real-time database integration

Order Types:
1. SELL ORDER: "I have X units, sell for Y each"
2. BUY ORDER: "I want X units, pay Y each"
3. Orders fill automatically when matched

Market UI:
"ğŸª PLAYER MARKET - Wood

SELL ORDERS (Lowest first)
$4.50 Ã— 100 units - Player: Jax
$4.75 Ã— 250 units - Player: Kim
$5.00 Ã— 500 units - Player: Bob

BUY ORDERS (Highest first)
$4.25 Ã— 150 units - Player: Alice
$4.00 Ã— 300 units - Player: Dan

[POST SELL ORDER]
Quantity: [___] Price: $[___] = Total: $___

[POST BUY ORDER]
Quantity: [___] Price: $[___] = Total: $___"

Market Features:
- Order history (last 50 transactions)
- Price charts (planned feature)
- Quick fill buttons (match best order)
- Bulk trading available
- Market manipulation possible with coordination

Transaction Examples:
- Sell 100 wood @ $4.50 = $450 revenue - $22.50 fee = $427.50 net
- Buy 50 planks @ $18 = $900 cost + $45 fee = $945 total

================================================================================
                         MULTIPLAYER FEATURES
================================================================================

--- CHAT SYSTEM ---

Global Chat:
- Real-time messaging (Firebase)
- 50 message history displayed
- Auto-scroll to newest
- Username + timestamp
- Discord integration (bidirectional sync)
- Trade coordination ("WTS 100 wood $4 each")

Chat Commands:
/help - Show commands
/clear - Clear local chat view
Messages limited to 200 characters

Discord Integration:
- Messages post to Discord webhook
- Discord messages appear in-game
- Community extends beyond browser
- No Discord account needed to play

--- ACCOUNT SYSTEM ---

Features:
- Username + password (no email)
- Simple hash password storage (SHA-256 style)
- Cloud saves via Firebase Firestore
- Auto-saves every 30 seconds
- Manual save button available
- Anonymous play supported (local storage only)

Account Benefits:
- Cloud save across devices
- Access to player market
- Chat privileges
- Leaderboard participation
- Trade history preservation

Login Types:
1. Guest Mode: Local saves only, no multiplayer
2. Create Account: Full features unlocked
3. Existing Account: Login to restore progress

Account UI:
"ğŸ‘¤ Account
Status: Logged in as Deaven200
ğŸ’¾ Last save: 2:30 AM (auto-saved)
â˜ï¸ Cloud Save: ON

[LOGOUT] [CHANGE PASSWORD]"

--- MULTIPLAYER SCALING ---

Technical Capacity:
- Firebase free tier: 500-1000 concurrent players
- Market orders: Unlimited (database limited)
- Chat messages: 50 visible, unlimited storage
- Save frequency: 30 second intervals
- Real-time updates: <500ms latency

Security:
- Server-side transaction validation
- Anti-cheat for resource editing
- Rate limiting on market orders
- Password hashing (not plaintext)
- Firebase rules enforce data integrity

================================================================================
                         USER INTERFACE
================================================================================

Screen Layout (Mobile-Optimized):

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’° $12,530  ğŸ“¦ 350/500     â”‚ â† Header
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚ â”‚ğŸŒ²Lv2 â”‚ğŸ«Lv1 â”‚ğŸ­Lv3 â”‚      â”‚ â† Subplot Boxes
â”‚ â”‚ 45W  â”‚ 23B  â”‚>Pln â”‚      â”‚    (Tap to interact)
â”‚ â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚    MAIN CONTENT AREA        â”‚
â”‚                             â”‚
â”‚  (Changes based on screen)  â”‚
â”‚                             â”‚
â”‚  - Home: Plot overview      â”‚
â”‚  - Inventory: Item list     â”‚
â”‚  - Markets: Trading UI      â”‚
â”‚  - Chat: Message feed       â”‚
â”‚                             â”‚
â”‚                             â”‚
â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ [ğŸ ] â”‚ [ğŸª] â”‚ [ğŸ›ï¸] â”‚ [ğŸ’¬] â”‚ â† Nav Bar
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Navigation Bar (Bottom):
ğŸ  Home - Plot management, building overview, workers
ğŸª Player Market - Trade with real players
ğŸ›ï¸ Government Market - NPC trading
ğŸ’¬ Chat - Global chat + Discord

Top Bar:
ğŸ’° Money display
ğŸ“¦ Inventory: Current/Max
âš™ï¸ Settings (menu button)
ğŸ‘¤ Account status

Home Screen Details:
"Plot 1 (3/3 subplots)
[ğŸŒ² Forest Lv2] - 45 wood ready | +2.5 wood/min
[ğŸ« Berry Lv1] - 23 berries      | +1.8 berries/min
[ğŸ­ Sawmill Lv3] - Producing     | 5 wood â†’ 1 plank

Workers Active: 2/10
Plot 2: [SWITCH]
[BUY NEW PLOT] - $35,000"

Inventory Screen:
"ğŸ“¦ INVENTORY (350/500)

ğŸŒ² Wood      Ã— 150 [SELL]
ğŸ« Berries   Ã— 45  [SELL]
ğŸ“ Planks    Ã— 32  [SELL]
ğŸ§± Bricks    Ã— 18  [SELL]

[SELL ALL] [GRID VIEW]"

Settings Menu:
âš™ï¸ Settings
ğŸ”Š Sound: ON
ğŸµ Music: ON
ğŸ’¾ Auto-Save: ON (30s)
ğŸ‘¤ Account: Deaven200
ğŸ“Š Stats
ğŸ”„ Reset Progress

Color Scheme:
- Background: Dark theme (#1a1a1a)
- Primary: Forest green (#22c55e)
- Secondary: Gold (#fbbf24)
- Error: Red (#ef4444)
- Success: Green (#10b981)

Typography:
- Headers: Bold, 18-24px
- Body: Regular, 14-16px
- Small text: 12px
- Monospace for numbers

Animations:
- Resource collection: Float up (+50 wood)
- Money gain/loss: Flash green/red
- Building completion: Celebration
- Smooth transitions between screens

================================================================================
                         TECHNICAL ARCHITECTURE
================================================================================

Technology Stack:
- Frontend: Vanilla JavaScript (ES6 Modules)
- Architecture: 43 modular ES6 files
- Backend: Firebase (Firestore + Auth)
- Hosting: GitHub Pages (static site)
- Audio: Web Audio API + MP3 files

Module Structure:
/js
  /config       - Game data (resources, buildings)
  /core         - State management, game loop
  /mechanics    - Harvesting, building, workers
  /ui           - Rendering, screens, modals
  /multiplayer  - Chat, market, accounts
  /utils        - Helper functions, DOM utilities

Key Features:
- 43 active modules (fully modularized)
- ES6 import/export system
- Global state management (window.S)
- Event-driven architecture
- Auto-save system (30s intervals)
- Render optimization (only update changed UI)

Performance:
- Game loop: 60 FPS
- Auto-save: Every 30 seconds
- Market updates: Real-time (Firebase listeners)
- Chat sync: <500ms latency
- Offline mode: Full functionality (except multiplayer)

Save System:
- Local Storage: Guest mode fallback
- Cloud Save: Firebase Firestore
- Save data: JSON serialization (~10-50KB)
- Auto-save on: Actions, timers, logout
- Manual save: Button in settings

Data Structure (Save):
{
  money: 12530,
  plots: [{subs: [{t:'wild',c:10,lv:2}, ...]}],
  inv: {wood: 150, planks: 32, ...},
  workers: [{plot:0,sub:1,interval:5}],
  stats: {built: 15, harvested: 5420, ...},
  prices: {wood: 5, planks: 20, ...}
}

================================================================================
                         DEVELOPMENT STATUS
================================================================================

COMPLETED FEATURES:
âœ… Core game loop (tap to harvest)
âœ… 40+ resources (tier 1-3)
âœ… 40+ buildings (6 categories)
âœ… Inventory system (expandable)
âœ… Worker automation (10 max)
âœ… Player market (order book)
âœ… Government market (dynamic pricing)
âœ… Cloud saves (Firebase)
âœ… Account system (username/password)
âœ… Global chat (Firebase real-time)
âœ… Discord integration (webhook sync)
âœ… Upgrade system (buildings Lv 1-5)
âœ… Offline progression (8 hour cap)
âœ… Mobile optimization
âœ… Music system (Little Jam soundtrack)
âœ… Sound effects (harvest, build, sell)
âœ… Auto-save (30 second intervals)
âœ… Multiple plot management
âœ… Building demolition (50% refund)
âœ… Modular architecture (43 modules)
âœ… Price fluctuation system
âœ… Transaction fees (5% player market)

KNOWN ISSUES:
- None currently!

PLANNED FEATURES (Future):
- Leaderboards (richest player, top producer)
- Guild system (shared warehouses)
- Events (2x production weekends)
- Achievements (unlock cosmetics)
- Plot naming/customization
- Trade history charts
- Mobile app (Progressive Web App)
- Automation rules (if price > X, sell Y)

================================================================================
                         GAME BALANCE
================================================================================

Economy Design:
- Early game: $5-10 per harvest (20-30 min for plot 2)
- Mid game: $50-100 per production cycle (buildings)
- Late game: $500+ per bulk trade (player market)

Progression Pace:
- Plot 1: Free (immediate)
- Plot 2: ~30-45 minutes of active play
- Plot 3: ~2-3 hours total playtime
- Plot 4: ~6-8 hours with automation
- Plot 5+: Days/weeks (long-term goals)

Building Investment:
- Starter building: $300-500 (affordable quickly)
- Mid-tier: $2,000-5,000 (requires planning)
- Advanced: $10,000+ (end-game investments)

Worker Economics:
- First worker: $500 (worth it immediately)
- 10 workers: $10,500 total (strong passive income)
- ROI: ~4-6 hours of passive collection

Market Balance:
- Government: Stable, guaranteed trades
- Player: Â±20% better deals (risk vs reward)
- Transaction fee: Prevents spam, encourages bulk

================================================================================
                            PLAYER EXPERIENCE
================================================================================

Typical Session:
1. Login â†’ Check workers (collect offline resources)
2. Harvest ready subplots (1-2 minutes)
3. Check markets for good deals (compare prices)
4. Post trading orders (buy materials, sell products)
5. Upgrade a building or hire worker (investment)
6. Chat with community (coordinate trades)
7. Set up production chains (plan next session)
8. Logout â†’ Workers continue producing

Session Length:
- Quick check: 2-5 minutes (collect + sell)
- Active play: 15-30 minutes (trading + building)
- Deep session: 1+ hour (market domination)

Retention Hooks:
- Workers produce while away (FOMO reducer)
- Market orders can fill anytime (check back)
- Cloud saves (no progress loss)
- Community chat (social connection)
- Long-term plot goals (weeks of progression)

Monetization:
- Currently: 100% free, no ads
- Potential: Cosmetic skins, plot slots

================================================================================
                               NOTES
================================================================================

Design Philosophy:
- Idle game with active opportunities
- Player skill = Market timing, not reflexes
- Multiplayer enhances but isn't required
- Progression should feel rewarding
- No pay-to-win elements
- Community-driven economy

Balance Considerations:
- Government market prevents total player market control
- Transaction fees slow rapid trading
- Plot costs scale exponentially (long-term goals)
- Workers provide passive income (offline-friendly)
- Resources stack (inventory management)

Technical Notes:
- Firebase free tier sufficient for 500-1000 players
- Modular architecture allows easy feature additions
- ES6 modules enable code splitting
- GitHub Pages hosting (free, reliable)
- Progressive Web App compatible

================================================================================
                               END OF DOCUMENT
================================================================================
